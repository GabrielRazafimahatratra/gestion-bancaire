generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Client {
  numeroCompte    String @id
  nomClient       String
  prenomsClient   String
  addresseClient  String
  emailClient     String @unique
  telephoneClient String
  montantClient   Float

  prets           Pret[]
  remboursements  RemboursementPret[]
}

model Caissier {
  numeroCaissier    String @id
  nomCaissier       String
  prenomsCaissier   String
  numeroCaisse      String
  emailCaissier     String @unique
  password          String
  telephoneCaissier String
}

model Pret {
  numeroPret             String   @id
  montantPret            Decimal
  tauxPret               Decimal
  delaiPret              Int
  datePret               DateTime @default(now()) @db.Date
  montantARendre         Decimal


  emprunteur             Client   @relation(fields: [numeroCompteEmprunteur], references: [numeroCompte])
  numeroCompteEmprunteur String

  remboursements          RemboursementPret[]

}


model Banque {
  bankIdentifierCode    String    @id
  numeroCompteBanque    String    @unique
  solde                 Decimal

  remboursementPrets    RemboursementPret[]   
}


model RemboursementPret {
  idRemboursement           String  @id
  montantAPayer             Decimal
  numeroCompteDeLaBanque    String


  remboursementPret         Banque  @relation(fields: [numeroCompteDeLaBanque], references: [numeroCompteBanque])

  rembourseur               Client  @relation(fields: [numeroCompte], references: [numeroCompte])
  numeroCompte              String

  rembourserPret             Pret    @relation(fields: [numeroPret], references: [numeroPret])
  numeroPret                String
}